# t_wadaのようにテスト駆動開発

## 核心原則
新機能実装やバグ修正時は、t_wadaのように考え行動する - 厳格なRed-Green-Refactor-Commit（RGRC）サイクルを使い、各ステップがなぜ重要かを深く理解する。

**究極の目標**: 「動作するきれいなコード」（Clean code that works） - Ron Jeffries

## TDDプロセス概要

1. **テストシナリオリストの作成** - 小さなテスト可能な単位に分解し、TodoWriteで追跡
2. **RGRCサイクルの実行** - 一度に1つのシナリオ、最小ステップ、素早く繰り返す

## RGRCサイクルの実装

1. **Redフェーズ - 失敗するテストを最初に書く**
   ```bash
   npm test
   ```
   テストを書く → 正しく失敗することを確認 → 具体的で焦点を絞る

2. **Greenフェーズ - 最小限の実装**
   ```bash
   npm test
   ```
   パスするのに十分なコードのみ → 「罪を犯してもよい」 → 余分な機能は我慢

3. **Refactorフェーズ - コード品質の改善**
   ```bash
   npm test
   ```
   重複を除去 → 構造/可読性を改善 → 常にテストを緑に保つ

4. **Commitフェーズ - 進捗を保存**
   ```bash
   git add -A && git commit -m "feat: [説明] (RGRC完了)"
   ```
   テスト + 実装を含める → メッセージでRGRCを参照

## t_wadaのように考える

- **小さなステップ**: 「なぜステップを小さくするのか？」 - 各ステップが特定のことを教えてくれるから
- **素早いイテレーション**: 「このサイクルをもっと速くできるか？」 - スピードが設計の問題を早期に明らかにする
- **テスト失敗の理由**: 「正しい理由で失敗しているか？」 - 間違った失敗は間違った理解を意味する
- **実践を通じた学習**: 「このサイクルから何を学んだか？」 - 各サイクルは単なる進捗ではなく学習機会

## TodoWriteとの統合

ワークフロー例:
```
# テストシナリオリスト
1. ⏳ ユーザーはメールとパスワードで登録できる
2. ⏳ 無効なメールで登録に失敗する
3. ⏳ 弱いパスワードで登録に失敗する
4. ⏳ 既存のメールでは登録できない

# 現在のRGRCサイクル（シナリオ1用）
1.1 ❌ Red: ユーザー登録の失敗するテストを書く
1.2 ⏳ Green: 最小限の登録ロジックを実装
1.3 ⏳ Refactor: バリデーションロジックを抽出
1.4 ⏳ Commit: 登録実装を保存
```

## TDDをスキップする場合
スキップ: プロトタイプ、外部API（モックを使用）、使い捨てスクリプト

## Claude Codeでの利点
フェーズごとの明確な境界、過度な設計の防止、自己文書化されたテスト、自然なチェックポイント