---
name: research
description: プロジェクト理解と技術調査を行う（実装なし）
priority: medium
suitable_for:
  scale: [small, medium, large]
  type: [exploration, analysis, learning]
  understanding: "≥ 30%"
  urgency: [low, medium]
aliases: []
timeout: 90
context:
  files_changed: "none"
  lines_changed: "0"
  new_features: false
  breaking_changes: false
---

# /research - プロジェクト理解と技術調査

## 目的
実装のコミットメントなしに、コードベースの調査、技術的解決策の研究、または既存の実装の理解を行います。

## 使用方法
即座の実装を必要としない探索、学習、研究タスクに使用します。

## 実行ステップ

### 1. コンテキストの読み込み
- プロジェクトの概要を素早く把握
- 探索すべき関連領域の特定

### 2. 詳細な調査
複雑さに応じて適切なアプローチを選択：

#### シンプルな検索の場合（直接ツール）：
- 特定のパターンには `Grep` を使用：「UserAuthクラスはどこで使われている？」
- ファイル検索には `Glob` を使用：「すべてのテストファイルを見つける」
- 既知のファイルには `Read` を使用：「auth.config.js を確認」
- **重要**: 効率のため複数のツールを並列実行
  例: クラス定義とその使用箇所を同時に検索

#### 複雑な探索の場合（タスクエージェント）：
**以下の場合は subagent_type: general-purpose のタスクエージェントを使用：**
- 複数ステップの調査が必要
- 明確な検索対象がない探索的分析
- アーキテクチャの理解が必要

#### タスクエージェントの使い分けガイド
タスクエージェントを使用する場合：
- 10以上の連続した検索操作
- コンテキストを意識した探索（関係性の理解）
- システムの包括的なマッピング

直接ツールを使用する場合：
- 10未満の特定の検索
- 既知のファイルパスやパターン
- 特定の項目の素早い確認

```
例：認証アーキテクチャのためのタスクエージェントの使用
- Task(subagent_type="general-purpose", 
      description="認証調査",
      prompt="すべての認証関連ファイル、セキュリティミドルウェアを見つけて分析し、ログインからログアウトまでの完全な認証フローをマッピングする")
```

- コードパターンの検索と分析
- 技術ドキュメントの調査
- アーキテクチャの決定事項の理解
- 発見事項の文書化

### 3. 発見事項の統合
- すべての調査タスクからの結果を統合
- 結合されたデータを分析し、主要なパターン、依存関係、洞察を特定
- 標準出力形式に従って発見事項を構造化

### 4. 永続的なドキュメント保存（オプション）
重要な発見の場合：
- `.claude/workspace/research/YYYY-MM-DD-topic.md` に保存
- 将来の作業をガイドする発見のみ
- Writeツールを使用して重要なアーキテクチャの洞察を永続化

## ワークフロー位置
```
[/think] → [/research] → [/code] → [/test]
           ↑ 現在位置
```
- **入力**: `/think` からのSOW（ワークフローの場合）
- **出力**: `/code` のための技術詳細
- **スタンドアロン**: 純粋な探索

## 効率的なリサーチパターン

### パターン1: トップダウン
1. エントリポイントを見つける（メインファイル、エクスポート）
2. 実装をたどる
3. 依存関係をマッピング

### パターン2: ボトムアップ
1. コア実装を見つける
2. 使用者をたどる
3. 使用パターンを理解

### パターン3: 幅優先
1. すべての関連ファイルを調査
2. 主要パターンを特定
3. 重要領域を深掘り

## 出力形式
```markdown
## 探索サマリー
- トピック: [探索した内容]
- 主要な発見事項:
  - [発見事項 1]
  - [発見事項 2]
  - ...
- 発見したコードパターン: [パターンのリスト]
- 推奨事項: [次のステップまたは洞察]
- 参考資料: [有用なリンク/ファイル]
```

## 使用する場合
- なじみのないコードベースの理解
- 実装オプションの調査
- バグの調査（修正前）
- 新しいライブラリ/フレームワークの学習
- アーキテクチャ分析

## 使用しない場合
- 何を実装すべきかすでに分かっている場合
- シンプルな質問の場合
- 即座のアクションが必要な場合

## 使用例

### シンプルな調査（直接ツール）：
```
/research "すべてのAPIエンドポイントを見つける"
/research "データベース接続はどこで設定されている？"
/research "すべてのReactコンポーネントをリスト"
```

### 複雑な調査（タスクエージェントを使用する可能性）：
```
/research "このプロジェクトで認証はどのように実装されている？"
/research "状態管理アーキテクチャを分析"
/research "フロントエンドからデータベースまでの完全なデータフローを理解"
```

## 次のステップ
- 計画が必要な場合：最初に `/think` を使用
- 問題が見つかった場合：課題を作成するか `/fix` を使用
- 実装が必要な場合：`/code` に進む
